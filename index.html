<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>Gate ç•°å¸¸ç›£æ§</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #0b0f14;
  color: #e6e6e6;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

h1 {
  color: #5da9ff;
  margin-bottom: 6px;
}

.sub {
  color: #9aa4af;
  font-size: 14px;
  margin-bottom: 16px;
}

.direction {
  padding: 12px 16px;
  border-radius: 8px;
  margin-bottom: 20px;
  font-weight: 600;
}

.direction.long {
  background: rgba(0, 200, 100, 0.15);
  border-left: 4px solid #00c864;
}

.direction.short {
  background: rgba(255, 80, 80, 0.15);
  border-left: 4px solid #ff5050;
}

.direction.flat {
  background: rgba(180, 180, 180, 0.1);
  border-left: 4px solid #888;
}

.section {
  margin-top: 24px;
}

.section h2 {
  margin-bottom: 12px;
}

.card {
  background: #121821;
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.card.long {
  border-left: 4px solid #00c864;
}

.card.short {
  border-left: 4px solid #ff5050;
}

.left {
  font-weight: 600;
}

.right {
  display: flex;
  gap: 14px;
  font-size: 14px;
}

.long-text {
  color: #00e676;
}

.short-text {
  color: #ff5252;
}

.score {
  font-weight: 700;
}
</style>
</head>

<body>
<div class="container">

<h1>Gate ç•°å¸¸ç›£æ§</h1>
<div id="updated" class="sub">è¼‰å…¥ä¸­â€¦</div>

<div id="directionBox" class="direction flat">
  åˆ¤æ–·ä¸­â€¦
</div>

<div class="section">
  <h2>ğŸš€ å¤šé ­ç•°å¸¸</h2>
  <div id="longList"></div>
</div>

<div class="section">
  <h2>ğŸ“‰ ç©ºé ­ç•°å¸¸</h2>
  <div id="shortList"></div>
</div>

</div>

<script>
const TOP_N = 5;        // Cï¼šåªé¡¯ç¤ºå‰ N å
const MIN_SCORE = 60;  // Cï¼šåˆ†æ•¸éæ¿¾é–€æª»

fetch("./data_fast.json")
  .then(r => r.json())
  .then(data => {
    // --- å°ç£æ™‚é–“é¡¯ç¤ºï¼ˆä¸è§£æ Dateï¼Œç›´æ¥ç”¨å­—ä¸²ï¼‰ ---
    document.getElementById("updated").innerText =
      "æœ€å¾Œæ›´æ–°ï¼š" + data.updated;

    const items = data.items || [];

    // åˆ†çµ„ + éæ¿¾
    const longs = items
      .filter(i => i.direction === "long" && i.score >= MIN_SCORE)
      .sort((a,b) => b.score - a.score)
      .slice(0, TOP_N);

    const shorts = items
      .filter(i => i.direction === "short" && i.score >= MIN_SCORE)
      .sort((a,b) => b.score - a.score)
      .slice(0, TOP_N);

    // --- Aï¼šæ•´é«”æ–¹å‘ä¸€å¥è©± ---
    const longScore = longs.reduce((s,i)=>s+i.score,0);
    const shortScore = shorts.reduce((s,i)=>s+i.score,0);

    const box = document.getElementById("directionBox");

    if (longScore > shortScore * 1.2) {
      box.className = "direction long";
      box.innerText = "ğŸ”¥ åå¤šç›¤ï¼ˆå¤šé ­ç•°å¸¸ä½”å„ªï¼‰";
    } else if (shortScore > longScore * 1.2) {
      box.className = "direction short";
      box.innerText = "â„ï¸ åç©ºç›¤ï¼ˆç©ºé ­ç•°å¸¸ä½”å„ªï¼‰";
    } else {
      box.className = "direction flat";
      box.innerText = "âšª ç›¤æ•´åéœ‡ç›ªï¼Œä¸å»ºè­°ç©æ¥µå‡ºæ‰‹";
    }

    // --- Bï¼šå¡ç‰‡åˆ—è¡¨ ---
    render(longs, "longList", "long");
    render(shorts, "shortList", "short");
  });

function render(list, elId, dir) {
  const el = document.getElementById(elId);
  el.innerHTML = "";

  if (list.length === 0) {
    el.innerHTML = "<div class='sub'>ç›®å‰æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„ç•°å¸¸</div>";
    return;
  }

  list.forEach(i => {
    const div = document.createElement("div");
    div.className = `card ${dir}`;
    div.innerHTML = `
      <div class="left">${i.symbol}</div>
      <div class="right">
        <span class="${dir}-text">${dir.toUpperCase()}</span>
        <span>${(i.change*100).toFixed(2)}%</span>
        <span>$${i.price}</span>
        <span class="score">${i.score}</span>
      </div>
    `;
    el.appendChild(div);
  });
}
</script>

</body>
</html>
