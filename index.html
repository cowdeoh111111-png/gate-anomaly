<!doctype html>
<html lang="zh-TW">
<head>
<meta charset="utf-8" />
<title>Gate 異常監控</title>
<style>
body {
  background:#0b0f14;
  color:#e5e7eb;
  font-family: monospace;
  padding:20px;
}
h1 { color:#60a5fa; }
.time { color:#9ca3af; margin-bottom:20px; }
.section { margin-top:30px; }
.row {
  display:grid;
  grid-template-columns: 140px 80px 80px 120px 80px;
  padding:10px 0;
  border-bottom:1px solid #1f2937;
}
.long { color:#22c55e; }
.short { color:#ef4444; }
.score { font-weight:bold; }
</style>
</head>
<body>

<h1>Gate 異常監控</h1>
<div class="time" id="time"></div>
<div id="app"></div>

<script>
fetch("data_fast.json?_=" + Date.now())
  .then(r => r.json())
  .then(d => {
    document.getElementById("time").textContent =
      "最後更新：" + d.updated;

    const groups = {};
    d.items.forEach(i => {
      if (!groups[i.category]) groups[i.category] = [];
      groups[i.category].push(i);
    });

    const app = document.getElementById("app");

    ["主流","山寨","瘋狗"].forEach(cat => {
      if (!groups[cat]) return;
      const sec = document.createElement("div");
      sec.className = "section";
      sec.innerHTML = `<h2>${cat}</h2>`;
      groups[cat].forEach(i => {
        sec.innerHTML += `
          <div class="row">
            <div>${i.symbol}</div>
            <div class="${i.direction}">${i.direction}</div>
            <div>${i.change}%</div>
            <div>$${i.price}</div>
            <div class="score">${i.score}</div>
          </div>`;
      });
      app.appendChild(sec);
    });
  });
</script>

</body>
</html>
