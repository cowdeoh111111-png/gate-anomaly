<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>Gate ç•°å¸¸ç›£æ§</title>
  <style>
    body {
      margin: 0;
      padding: 24px;
      background: #0b0f14;
      color: #e5e7eb;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
    }

    h1 {
      color: #4da3ff;
      margin-bottom: 8px;
    }

    .muted {
      color: #9ca3af;
      font-size: 14px;
    }

    .status {
      margin: 16px 0;
      font-size: 18px;
    }

    .status span {
      font-weight: bold;
    }

    .long { color: #22c55e; }
    .short { color: #ef4444; }
    .neutral { color: #facc15; }

    .warn {
      margin: 12px 0;
      padding: 10px;
      background: rgba(250, 204, 21, 0.1);
      color: #facc15;
      border-left: 4px solid #facc15;
    }

    .section {
      margin-top: 28px;
    }

    .section h2 {
      font-size: 16px;
      margin-bottom: 8px;
      color: #c7d2fe;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 15px;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #1f2937;
      text-align: left;
    }

    th {
      color: #9ca3af;
      font-weight: normal;
    }

    .confidence {
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Gate ç•°å¸¸ç›£æ§</h1>
  <div class="muted" id="updateTime"></div>

  <!-- å¸‚å ´ç‹€æ…‹ -->
  <div class="status">
    ç›®å‰æ–¹å‘ï¼š
    <span id="marketDir" class="neutral">ç›¤æ•´</span>
    ï½œ ä¿¡å¿ƒ
    <span id="marketConfidence">0%</span>
  </div>

  <div id="marketHint" class="warn"></div>

  <!-- è§€å¯Ÿåå–® -->
  <div class="section">
    <h2>ğŸ“Š è§€å¯Ÿåå–®ï¼ˆå°šæœªç¢ºèªï¼‰</h2>
    <table id="watchTable">
      <thead>
        <tr>
          <th>å¹£ç¨®</th>
          <th>æ–¹å‘</th>
          <th>è®Šå‹•</th>
          <th>åƒ¹æ ¼</th>
          <th>å¼·åº¦</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- å¯é€²å ´ -->
  <div class="section">
    <h2>ğŸš€ å¯è€ƒæ…®é€²å ´ï¼ˆéœ€è‡ªè¡Œç¢ºèªï¼‰</h2>
    <table id="entryTable">
      <thead>
        <tr>
          <th>å¹£ç¨®</th>
          <th>æ–¹å‘</th>
          <th>ä¿¡å¿ƒ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

<script>
/* =========================
   æ¨¡æ“¬è³‡æ–™ï¼ˆä¹‹å¾Œå¯æ› APIï¼‰
========================= */

const data = {
  updated: new Date().toLocaleString("zh-TW"),
  items: [
    { symbol: "BTC_USDT", dir: "short", change: -1.1, price: 87223, strength: 52 },
    { symbol: "ETH_USDT", dir: "short", change: -1.07, price: 2921, strength: 48 },
    { symbol: "SOL_USDT", dir: "neutral", change: -0.2, price: 122, strength: 35 },
    { symbol: "ARB_USDT", dir: "long", change: 0.6, price: 1.23, strength: 61 }
  ]
};

/* =========================
   å¸‚å ´åˆ¤æ–·é‚è¼¯ï¼ˆB ç‰ˆï¼‰
========================= */

function calcMarket(items) {
  let long = 0, short = 0, sum = 0;
  items.forEach(i => {
    if (i.dir === "long") long++;
    if (i.dir === "short") short++;
    sum += i.strength;
  });

  const avg = sum / items.length;
  let dir = "ç›¤æ•´";

  if (long >= 2 && long > short && avg >= 55) dir = "åå¤š";
  if (short >= 2 && short > long && avg >= 55) dir = "åç©º";

  return { dir, confidence: Math.round(avg) };
}

/* =========================
   ç•«é¢æ¸²æŸ“
========================= */

document.getElementById("updateTime").innerText =
  "æœ€å¾Œæ›´æ–°ï¼š" + data.updated;

const market = calcMarket(data.items);

const dirEl = document.getElementById("marketDir");
dirEl.innerText = market.dir;
dirEl.className =
  market.dir === "åå¤š" ? "long" :
  market.dir === "åç©º" ? "short" : "neutral";

document.getElementById("marketConfidence").innerText =
  market.confidence + "%";

const hint = document.getElementById("marketHint");
if (market.dir === "ç›¤æ•´") {
  hint.innerText = "âš ï¸ ç›®å‰æ–¹å‘ä¸æ˜ç¢ºï¼Œåƒ…ä¾›è§€å¯Ÿï¼Œä¸å»ºè­°é€²å ´";
} else {
  hint.innerText = "âœ… å¸‚å ´æœ‰æ–¹å‘ï¼Œä½†ä»éœ€è‡ªè¡Œç¢ºèªçµæ§‹";
}

/* è§€å¯Ÿåå–® */
const watchBody = document.querySelector("#watchTable tbody");
data.items.forEach(i => {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${i.symbol}</td>
    <td class="${i.dir}">${i.dir}</td>
    <td>${i.change}%</td>
    <td>$${i.price}</td>
    <td class="confidence">${i.strength}</td>
  `;
  watchBody.appendChild(tr);
});

/* å¯é€²å ´ï¼ˆä¿¡å¿ƒ â‰¥ 70 æ‰é¡¯ç¤ºï¼‰ */
const entryBody = document.querySelector("#entryTable tbody");
const entries = data.items.filter(i => i.strength >= 70);

if (entries.length === 0) {
  const tr = document.createElement("tr");
  tr.innerHTML = `<td colspan="3" class="muted">ï¼ˆç›®å‰ç„¡å¯é€²å ´æ¨™çš„ï¼‰</td>`;
  entryBody.appendChild(tr);
} else {
  entries.forEach(i => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i.symbol}</td>
      <td class="${i.dir}">${i.dir}</td>
      <td class="confidence">${i.strength}%</td>
    `;
    entryBody.appendChild(tr);
  });
}
</script>

</body>
</html>
