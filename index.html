<!doctype html>
<html lang="zh-TW">
<head>
<meta charset="utf-8">
<title>Gate ç•°å¸¸ç›£æ§</title>

<style>
body {
  margin:0;
  padding:16px;
  background:#0b0f14;
  color:#e5e7eb;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

h1 {
  color:#60a5fa;
  margin-bottom:4px;
}

.time {
  color:#9ca3af;
  font-size:14px;
  margin-bottom:16px;
}

.block {
  border-radius:12px;
  padding:12px;
  margin-bottom:20px;
  background:#111827;
}

.block.long { border-left:4px solid #22c55e; }
.block.short { border-left:4px solid #ef4444; }

.block-title {
  font-size:18px;
  margin-bottom:8px;
}

.row {
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px 0;
  border-bottom:1px solid #1f2937;
}

.row:last-child { border-bottom:none; }

.symbol {
  font-size:18px;
  font-weight:600;
}

.tag {
  font-size:13px;
  padding:4px 8px;
  border-radius:8px;
  background:#1f2937;
}

.long .tag { color:#22c55e; }
.short .tag { color:#ef4444; }

.meta {
  text-align:right;
  font-size:14px;
}

.score {
  font-size:18px;
  font-weight:700;
  margin-left:8px;
}
</style>
</head>

<body>

<h1>Gate ç•°å¸¸ç›£æ§</h1>
<div class="time" id="time"></div>

<div id="long"></div>
<div id="short"></div>

<script>
fetch("data_fast.json?_=" + Date.now())
  .then(r => r.json())
  .then(d => {
    document.getElementById("time").innerText =
      "æœ€å¾Œæ›´æ–°ï¼š" + d.updated;

    const longBox = document.getElementById("long");
    const shortBox = document.getElementById("short");

    const longs = d.items.filter(i => i.direction === "long");
    const shorts = d.items.filter(i => i.direction === "short");

    if (longs.length) {
      longBox.innerHTML = `
        <div class="block long">
          <div class="block-title">ğŸš€ å¤šé ­ç•°å¸¸</div>
          ${longs.map(render).join("")}
        </div>`;
    }

    if (shorts.length) {
      shortBox.innerHTML = `
        <div class="block short">
          <div class="block-title">ğŸ“‰ ç©ºé ­ç•°å¸¸</div>
          ${shorts.map(render).join("")}
        </div>`;
    }

    if (!longs.length && !shorts.length) {
      longBox.innerHTML = `<div class="time">ç›®å‰æ²’æœ‰å¯æ“ä½œç•°å¸¸</div>`;
    }
  });

function render(i) {
  return `
    <div class="row">
      <div>
        <div class="symbol">${i.symbol}</div>
        <div class="tag">çŸ­æœŸæŠ•æ©Ÿ${i.direction === "long" ? "å¤š" : "ç©º"}</div>
      </div>
      <div class="meta">
        <div>${i.change}%</div>
        <div>$${i.price}</div>
      </div>
      <div class="score">${i.score}</div>
    </div>
  `;
}
</script>

</body>
</html>
